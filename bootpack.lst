     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_init_pic
     7 00000000                                 	EXTERN	_init_gdtidt
     8 00000000                                 	EXTERN	_init_palette
     9 00000000                                 	EXTERN	_init_screen
    10 00000000                                 	EXTERN	_io_sti
    11 00000000                                 	EXTERN	_putfonts8_asc
    12 00000000                                 	EXTERN	_init_mouse_cursor8
    13 00000000                                 	EXTERN	_putblock8_8
    14 00000000                                 	EXTERN	_sprintf
    15 00000000                                 	EXTERN	_io_out8
    16 00000000                                 	EXTERN	_io_cli
    17 00000000                                 	EXTERN	_keybuf
    18 00000000                                 	EXTERN	_boxfill8
    19 00000000                                 	EXTERN	_io_stihlt
    20 00000000                                 [FILE "bootpack.c"]
    21                                          [SECTION .data]
    22 00000000                                 LC0:
    23 00000000 57 65 6C 63 6F 6D 65 20 74 6F   	DB	"Welcome to",0x00
       0000000A 00 
    24 0000000B                                 LC1:
    25 0000000B 43 61 6E 6F 70 75 73 20 4F 53   	DB	"Canopus OS",0x00
       00000015 00 
    26 00000016                                 LC2:
    27 00000016 28 25 64 2C 20 25 64 29 00      	DB	"(%d, %d)",0x00
    28 0000001F                                 LC3:
    29 0000001F 25 30 32 58 00                  	DB	"%02X",0x00
    30                                          [SECTION .text]
    31 00000000                                 	GLOBAL	_HariMain
    32 00000000                                 _HariMain:
    33 00000000 55                              	PUSH	EBP
    34 00000001 89 E5                           	MOV	EBP,ESP
    35 00000003 57                              	PUSH	EDI
    36 00000004 56                              	PUSH	ESI
    37 00000005 53                              	PUSH	EBX
    38 00000006 BB 00000002                     	MOV	EBX,2
    39 0000000B 81 EC 00000130                  	SUB	ESP,304
    40 00000011 E8 [00000000]                   	CALL	_init_pic
    41 00000016 E8 [00000000]                   	CALL	_init_gdtidt
    42 0000001B E8 [00000000]                   	CALL	_init_palette
    43 00000020 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
    44 00000027 50                              	PUSH	EAX
    45 00000028 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    46 0000002F 50                              	PUSH	EAX
    47 00000030 FF 35 00000FF8                  	PUSH	DWORD [4088]
    48 00000036 E8 [00000000]                   	CALL	_init_screen
    49 0000003B E8 [00000000]                   	CALL	_io_sti
    50 00000040 68 [00000000]                   	PUSH	LC0
    51 00000045 6A 00                           	PUSH	0
    52 00000047 6A 32                           	PUSH	50
    53 00000049 6A 3C                           	PUSH	60
    54 0000004B 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    55 00000052 50                              	PUSH	EAX
    56 00000053 FF 35 00000FF8                  	PUSH	DWORD [4088]
    57 00000059 E8 [00000000]                   	CALL	_putfonts8_asc
    58 0000005E 83 C4 24                        	ADD	ESP,36
    59 00000061 68 [0000000B]                   	PUSH	LC1
    60 00000066 6A 00                           	PUSH	0
    61 00000068 6A 46                           	PUSH	70
    62 0000006A 6A 46                           	PUSH	70
    63 0000006C 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    64 00000073 50                              	PUSH	EAX
    65 00000074 FF 35 00000FF8                  	PUSH	DWORD [4088]
    66 0000007A E8 [00000000]                   	CALL	_putfonts8_asc
    67 0000007F 8B 15 00000FF4                  	MOV	EDX,DWORD [4084]
    68 00000085 89 D0                           	MOV	EAX,EDX
    69 00000087 66 99                           	CWD
    70 00000089 66 F7 FB                        	IDIV	BX
    71 0000008C 0F BF D0                        	MOVSX	EDX,AX
    72 0000008F 8D 7A F8                        	LEA	EDI,DWORD [-8+EDX]
    73 00000092 66 8B 15 00000FF6               	MOV	DX,WORD [4086]
    74 00000099 89 D0                           	MOV	EAX,EDX
    75 0000009B 6A 07                           	PUSH	7
    76 0000009D 66 99                           	CWD
    77 0000009F 66 F7 FB                        	IDIV	BX
    78 000000A2 98                              	CWDE
    79 000000A3 8D 9D FFFFFEC4                  	LEA	EBX,DWORD [-316+EBP]
    80 000000A9 53                              	PUSH	EBX
    81 000000AA 8D 70 F8                        	LEA	ESI,DWORD [-8+EAX]
    82 000000AD E8 [00000000]                   	CALL	_init_mouse_cursor8
    83 000000B2 83 C4 20                        	ADD	ESP,32
    84 000000B5 6A 10                           	PUSH	16
    85 000000B7 53                              	PUSH	EBX
    86 000000B8 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
    87 000000BB 56                              	PUSH	ESI
    88 000000BC 57                              	PUSH	EDI
    89 000000BD 6A 10                           	PUSH	16
    90 000000BF 6A 10                           	PUSH	16
    91 000000C1 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    92 000000C8 50                              	PUSH	EAX
    93 000000C9 FF 35 00000FF8                  	PUSH	DWORD [4088]
    94 000000CF E8 [00000000]                   	CALL	_putblock8_8
    95 000000D4 83 C4 20                        	ADD	ESP,32
    96 000000D7 56                              	PUSH	ESI
    97 000000D8 57                              	PUSH	EDI
    98 000000D9 68 [00000016]                   	PUSH	LC2
    99 000000DE 53                              	PUSH	EBX
   100 000000DF E8 [00000000]                   	CALL	_sprintf
   101 000000E4 53                              	PUSH	EBX
   102 000000E5 6A 07                           	PUSH	7
   103 000000E7 6A 00                           	PUSH	0
   104 000000E9 6A 00                           	PUSH	0
   105 000000EB 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   106 000000F2 50                              	PUSH	EAX
   107 000000F3 FF 35 00000FF8                  	PUSH	DWORD [4088]
   108 000000F9 E8 [00000000]                   	CALL	_putfonts8_asc
   109 000000FE 83 C4 28                        	ADD	ESP,40
   110 00000101 68 000000F9                     	PUSH	249
   111 00000106 6A 21                           	PUSH	33
   112 00000108 E8 [00000000]                   	CALL	_io_out8
   113 0000010D 68 000000F9                     	PUSH	249
   114 00000112 68 000000A1                     	PUSH	161
   115 00000117 E8 [00000000]                   	CALL	_io_out8
   116 0000011C 83 C4 10                        	ADD	ESP,16
   117 0000011F                                 L12:
   118 0000011F E8 [00000000]                   	CALL	_io_cli
   119 00000124 A1 [00000020]                   	MOV	EAX,DWORD [_keybuf+32]
   120 00000129 85 C0                           	TEST	EAX,EAX
   121 0000012B 74 7C                           	JE	L15
   122 0000012D 48                              	DEC	EAX
   123 0000012E 31 D2                           	XOR	EDX,EDX
   124 00000130 0F B6 1D [00000000]             	MOVZX	EBX,BYTE [_keybuf]
   125 00000137 A3 [00000020]                   	MOV	DWORD [_keybuf+32],EAX
   126 0000013C 39 C2                           	CMP	EDX,EAX
   127 0000013E 7D 13                           	JGE	L14
   128 00000140 89 C1                           	MOV	ECX,EAX
   129 00000142                                 L11:
   130 00000142 8A 82 [00000001]                	MOV	AL,BYTE [_keybuf+1+EDX]
   131 00000148 88 82 [00000000]                	MOV	BYTE [_keybuf+EDX],AL
   132 0000014E 42                              	INC	EDX
   133 0000014F 39 CA                           	CMP	EDX,ECX
   134 00000151 7C EF                           	JL	L11
   135 00000153                                 L14:
   136 00000153 E8 [00000000]                   	CALL	_io_sti
   137 00000158 53                              	PUSH	EBX
   138 00000159 68 [0000001F]                   	PUSH	LC3
   139 0000015E 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   140 00000161 53                              	PUSH	EBX
   141 00000162 E8 [00000000]                   	CALL	_sprintf
   142 00000167 6A 1F                           	PUSH	31
   143 00000169 6A 0F                           	PUSH	15
   144 0000016B 6A 10                           	PUSH	16
   145 0000016D 6A 00                           	PUSH	0
   146 0000016F 6A 0F                           	PUSH	15
   147 00000171 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   148 00000178 50                              	PUSH	EAX
   149 00000179 FF 35 00000FF8                  	PUSH	DWORD [4088]
   150 0000017F E8 [00000000]                   	CALL	_boxfill8
   151 00000184 83 C4 28                        	ADD	ESP,40
   152 00000187 53                              	PUSH	EBX
   153 00000188 6A 07                           	PUSH	7
   154 0000018A 6A 10                           	PUSH	16
   155 0000018C 6A 00                           	PUSH	0
   156 0000018E 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   157 00000195 50                              	PUSH	EAX
   158 00000196 FF 35 00000FF8                  	PUSH	DWORD [4088]
   159 0000019C E8 [00000000]                   	CALL	_putfonts8_asc
   160 000001A1 83 C4 18                        	ADD	ESP,24
   161 000001A4 E9 FFFFFF76                     	JMP	L12
   162 000001A9                                 L15:
   163 000001A9 E8 [00000000]                   	CALL	_io_stihlt
   164 000001AE E9 FFFFFF6C                     	JMP	L12
