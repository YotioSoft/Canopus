     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_hankaku
     7 00000000                                 	EXTERN	_io_hlt
     8 00000000                                 	EXTERN	_io_load_eflags
     9 00000000                                 	EXTERN	_io_cli
    10 00000000                                 	EXTERN	_io_out8
    11 00000000                                 	EXTERN	_io_store_eflags
    12 00000000                                 [FILE "bootpack.c"]
    13                                          [SECTION .data]
    14 00000000                                 LC0:
    15 00000000 43                              	DB	67
    16 00000001 61                              	DB	97
    17 00000002 6E                              	DB	110
    18 00000003 6F                              	DB	111
    19 00000004 70                              	DB	112
    20 00000005 75                              	DB	117
    21 00000006 73                              	DB	115
    22 00000007 20                              	DB	32
    23 00000008 4F                              	DB	79
    24 00000009 53                              	DB	83
    25 0000000A 00                              	RESB	1
    26                                          [SECTION .text]
    27 00000000                                 	GLOBAL	_HariMain
    28 00000000                                 _HariMain:
    29 00000000 55                              	PUSH	EBP
    30 00000001 89 E5                           	MOV	EBP,ESP
    31 00000003 57                              	PUSH	EDI
    32 00000004 56                              	PUSH	ESI
    33 00000005 BE [00000000]                   	MOV	ESI,LC0
    34 0000000A 83 EC 10                        	SUB	ESP,16
    35 0000000D 8D 7D E8                        	LEA	EDI,DWORD [-24+EBP]
    36 00000010 E8 00000163                     	CALL	_init_palette
    37 00000015 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
    38 0000001C 50                              	PUSH	EAX
    39 0000001D 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    40 00000024 50                              	PUSH	EAX
    41 00000025 FF 35 00000FF8                  	PUSH	DWORD [4088]
    42 0000002B E8 0000004B                     	CALL	_init_screen
    43 00000030 83 C4 0C                        	ADD	ESP,12
    44 00000033 FC                              	CLD
    45 00000034 B9 0000000B                     	MOV	ECX,11
    46 00000039 F3                              	REP
    47 0000003A A4                              	MOVSB
    48 0000003B 31 F6                           	XOR	ESI,ESI
    49 0000003D BF 0000003C                     	MOV	EDI,60
    50 00000042                                 L6:
    51 00000042 0F BE 44 35 E8                  	MOVSX	EAX,BYTE [-24+EBP+ESI*1]
    52 00000047 C1 E0 04                        	SAL	EAX,4
    53 0000004A 46                              	INC	ESI
    54 0000004B 05 [00000000]                   	ADD	EAX,_hankaku
    55 00000050 50                              	PUSH	EAX
    56 00000051 6A 00                           	PUSH	0
    57 00000053 6A 32                           	PUSH	50
    58 00000055 57                              	PUSH	EDI
    59 00000056 83 C7 08                        	ADD	EDI,8
    60 00000059 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    61 00000060 50                              	PUSH	EAX
    62 00000061 FF 35 00000FF8                  	PUSH	DWORD [4088]
    63 00000067 E8 00000086                     	CALL	_putfont8
    64 0000006C 83 C4 18                        	ADD	ESP,24
    65 0000006F 83 FE 09                        	CMP	ESI,9
    66 00000072 7E CE                           	JLE	L6
    67 00000074                                 L10:
    68 00000074 E8 [00000000]                   	CALL	_io_hlt
    69 00000079 EB F9                           	JMP	L10
    70 0000007B                                 	GLOBAL	_init_screen
    71 0000007B                                 _init_screen:
    72 0000007B 55                              	PUSH	EBP
    73 0000007C 89 E5                           	MOV	EBP,ESP
    74 0000007E 57                              	PUSH	EDI
    75 0000007F 56                              	PUSH	ESI
    76 00000080 53                              	PUSH	EBX
    77 00000081 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
    78 00000084 56                              	PUSH	ESI
    79 00000085 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
    80 00000088 53                              	PUSH	EBX
    81 00000089 8B 7D 08                        	MOV	EDI,DWORD [8+EBP]
    82 0000008C 6A 00                           	PUSH	0
    83 0000008E 6A 00                           	PUSH	0
    84 00000090 6A 08                           	PUSH	8
    85 00000092 53                              	PUSH	EBX
    86 00000093 57                              	PUSH	EDI
    87 00000094 E8 000000F2                     	CALL	_boxfill8
    88 00000099 8D 46 F6                        	LEA	EAX,DWORD [-10+ESI]
    89 0000009C 56                              	PUSH	ESI
    90 0000009D 83 EE 28                        	SUB	ESI,40
    91 000000A0 53                              	PUSH	EBX
    92 000000A1 50                              	PUSH	EAX
    93 000000A2 6A 00                           	PUSH	0
    94 000000A4 6A 0F                           	PUSH	15
    95 000000A6 53                              	PUSH	EBX
    96 000000A7 57                              	PUSH	EDI
    97 000000A8 E8 000000DE                     	CALL	_boxfill8
    98 000000AD 83 C4 38                        	ADD	ESP,56
    99 000000B0 56                              	PUSH	ESI
   100 000000B1 8D 73 CE                        	LEA	ESI,DWORD [-50+EBX]
   101 000000B4 56                              	PUSH	ESI
   102 000000B5 6A 1E                           	PUSH	30
   103 000000B7 6A 32                           	PUSH	50
   104 000000B9 6A 07                           	PUSH	7
   105 000000BB 53                              	PUSH	EBX
   106 000000BC 57                              	PUSH	EDI
   107 000000BD E8 000000C9                     	CALL	_boxfill8
   108 000000C2 6A 28                           	PUSH	40
   109 000000C4 56                              	PUSH	ESI
   110 000000C5 6A 1E                           	PUSH	30
   111 000000C7 6A 32                           	PUSH	50
   112 000000C9 6A 0E                           	PUSH	14
   113 000000CB 53                              	PUSH	EBX
   114 000000CC 57                              	PUSH	EDI
   115 000000CD E8 000000B9                     	CALL	_boxfill8
   116 000000D2 8D 43 C9                        	LEA	EAX,DWORD [-55+EBX]
   117 000000D5 83 C4 38                        	ADD	ESP,56
   118 000000D8 6A 26                           	PUSH	38
   119 000000DA 50                              	PUSH	EAX
   120 000000DB 8D 43 C4                        	LEA	EAX,DWORD [-60+EBX]
   121 000000DE 6A 21                           	PUSH	33
   122 000000E0 50                              	PUSH	EAX
   123 000000E1 6A 01                           	PUSH	1
   124 000000E3 53                              	PUSH	EBX
   125 000000E4 57                              	PUSH	EDI
   126 000000E5 E8 000000A1                     	CALL	_boxfill8
   127 000000EA 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   128 000000ED 5B                              	POP	EBX
   129 000000EE 5E                              	POP	ESI
   130 000000EF 5F                              	POP	EDI
   131 000000F0 5D                              	POP	EBP
   132 000000F1 C3                              	RET
   133 000000F2                                 	GLOBAL	_putfont8
   134 000000F2                                 _putfont8:
   135 000000F2 55                              	PUSH	EBP
   136 000000F3 89 E5                           	MOV	EBP,ESP
   137 000000F5 57                              	PUSH	EDI
   138 000000F6 56                              	PUSH	ESI
   139 000000F7 31 F6                           	XOR	ESI,ESI
   140 000000F9 53                              	PUSH	EBX
   141 000000FA 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
   142 000000FD 8A 5D 18                        	MOV	BL,BYTE [24+EBP]
   143 00000100                                 L26:
   144 00000100 8B 45 14                        	MOV	EAX,DWORD [20+EBP]
   145 00000103 8B 55 10                        	MOV	EDX,DWORD [16+EBP]
   146 00000106 01 F0                           	ADD	EAX,ESI
   147 00000108 0F AF 45 0C                     	IMUL	EAX,DWORD [12+EBP]
   148 0000010C 03 45 08                        	ADD	EAX,DWORD [8+EBP]
   149 0000010F 8D 0C 02                        	LEA	ECX,DWORD [EDX+EAX*1]
   150 00000112 8A 14 3E                        	MOV	DL,BYTE [ESI+EDI*1]
   151 00000115 84 D2                           	TEST	DL,DL
   152 00000117 79 02                           	JNS	L18
   153 00000119 88 19                           	MOV	BYTE [ECX],BL
   154 0000011B                                 L18:
   155 0000011B 88 D0                           	MOV	AL,DL
   156 0000011D 83 E0 40                        	AND	EAX,64
   157 00000120 84 C0                           	TEST	AL,AL
   158 00000122 74 03                           	JE	L19
   159 00000124 88 59 01                        	MOV	BYTE [1+ECX],BL
   160 00000127                                 L19:
   161 00000127 88 D0                           	MOV	AL,DL
   162 00000129 83 E0 20                        	AND	EAX,32
   163 0000012C 84 C0                           	TEST	AL,AL
   164 0000012E 74 03                           	JE	L20
   165 00000130 88 59 02                        	MOV	BYTE [2+ECX],BL
   166 00000133                                 L20:
   167 00000133 88 D0                           	MOV	AL,DL
   168 00000135 83 E0 10                        	AND	EAX,16
   169 00000138 84 C0                           	TEST	AL,AL
   170 0000013A 74 03                           	JE	L21
   171 0000013C 88 59 03                        	MOV	BYTE [3+ECX],BL
   172 0000013F                                 L21:
   173 0000013F 88 D0                           	MOV	AL,DL
   174 00000141 83 E0 08                        	AND	EAX,8
   175 00000144 84 C0                           	TEST	AL,AL
   176 00000146 74 03                           	JE	L22
   177 00000148 88 59 04                        	MOV	BYTE [4+ECX],BL
   178 0000014B                                 L22:
   179 0000014B 88 D0                           	MOV	AL,DL
   180 0000014D 83 E0 04                        	AND	EAX,4
   181 00000150 84 C0                           	TEST	AL,AL
   182 00000152 74 03                           	JE	L23
   183 00000154 88 59 05                        	MOV	BYTE [5+ECX],BL
   184 00000157                                 L23:
   185 00000157 88 D0                           	MOV	AL,DL
   186 00000159 83 E0 02                        	AND	EAX,2
   187 0000015C 84 C0                           	TEST	AL,AL
   188 0000015E 74 03                           	JE	L24
   189 00000160 88 59 06                        	MOV	BYTE [6+ECX],BL
   190 00000163                                 L24:
   191 00000163 83 E2 01                        	AND	EDX,1
   192 00000166 84 D2                           	TEST	DL,DL
   193 00000168 74 03                           	JE	L16
   194 0000016A 88 59 07                        	MOV	BYTE [7+ECX],BL
   195 0000016D                                 L16:
   196 0000016D 46                              	INC	ESI
   197 0000016E 83 FE 0F                        	CMP	ESI,15
   198 00000171 7E 8D                           	JLE	L26
   199 00000173 5B                              	POP	EBX
   200 00000174 5E                              	POP	ESI
   201 00000175 5F                              	POP	EDI
   202 00000176 5D                              	POP	EBP
   203 00000177 C3                              	RET
   204                                          [SECTION .data]
   205 0000000B                                 _table_rgb.0:
   206 0000000B 00                              	DB	0
   207 0000000C 00                              	DB	0
   208 0000000D 00                              	DB	0
   209 0000000E FF                              	DB	-1
   210 0000000F 00                              	DB	0
   211 00000010 00                              	DB	0
   212 00000011 00                              	DB	0
   213 00000012 FF                              	DB	-1
   214 00000013 00                              	DB	0
   215 00000014 FF                              	DB	-1
   216 00000015 FF                              	DB	-1
   217 00000016 00                              	DB	0
   218 00000017 00                              	DB	0
   219 00000018 00                              	DB	0
   220 00000019 FF                              	DB	-1
   221 0000001A FF                              	DB	-1
   222 0000001B 00                              	DB	0
   223 0000001C FF                              	DB	-1
   224 0000001D 00                              	DB	0
   225 0000001E FF                              	DB	-1
   226 0000001F FF                              	DB	-1
   227 00000020 FF                              	DB	-1
   228 00000021 FF                              	DB	-1
   229 00000022 FF                              	DB	-1
   230 00000023 C6                              	DB	-58
   231 00000024 C6                              	DB	-58
   232 00000025 C6                              	DB	-58
   233 00000026 84                              	DB	-124
   234 00000027 00                              	DB	0
   235 00000028 00                              	DB	0
   236 00000029 00                              	DB	0
   237 0000002A 84                              	DB	-124
   238 0000002B 00                              	DB	0
   239 0000002C 84                              	DB	-124
   240 0000002D 84                              	DB	-124
   241 0000002E 00                              	DB	0
   242 0000002F 00                              	DB	0
   243 00000030 00                              	DB	0
   244 00000031 84                              	DB	-124
   245 00000032 84                              	DB	-124
   246 00000033 00                              	DB	0
   247 00000034 84                              	DB	-124
   248 00000035 00                              	DB	0
   249 00000036 84                              	DB	-124
   250 00000037 84                              	DB	-124
   251 00000038 84                              	DB	-124
   252 00000039 84                              	DB	-124
   253 0000003A 84                              	DB	-124
   254                                          [SECTION .text]
   255 00000178                                 	GLOBAL	_init_palette
   256 00000178                                 _init_palette:
   257 00000178 55                              	PUSH	EBP
   258 00000179 89 E5                           	MOV	EBP,ESP
   259 0000017B 68 [0000000B]                   	PUSH	_table_rgb.0
   260 00000180 6A 0F                           	PUSH	15
   261 00000182 6A 00                           	PUSH	0
   262 00000184 E8 00000053                     	CALL	_set_palette
   263 00000189 C9                              	LEAVE
   264 0000018A C3                              	RET
   265 0000018B                                 	GLOBAL	_boxfill8
   266 0000018B                                 _boxfill8:
   267 0000018B 55                              	PUSH	EBP
   268 0000018C 89 E5                           	MOV	EBP,ESP
   269 0000018E 57                              	PUSH	EDI
   270 0000018F 56                              	PUSH	ESI
   271 00000190 53                              	PUSH	EBX
   272 00000191 51                              	PUSH	ECX
   273 00000192 51                              	PUSH	ECX
   274 00000193 8A 45 10                        	MOV	AL,BYTE [16+EBP]
   275 00000196 8B 4D 18                        	MOV	ECX,DWORD [24+EBP]
   276 00000199 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
   277 0000019C 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   278 0000019F 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   279 000001A2 7F 31                           	JG	L42
   280 000001A4 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   281 000001A7 0F AF D9                        	IMUL	EBX,ECX
   282 000001AA                                 L40:
   283 000001AA 8B 55 14                        	MOV	EDX,DWORD [20+EBP]
   284 000001AD 39 FA                           	CMP	EDX,EDI
   285 000001AF 7F 1B                           	JG	L44
   286 000001B1 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   287 000001B4 01 DE                           	ADD	ESI,EBX
   288 000001B6 01 D6                           	ADD	ESI,EDX
   289 000001B8 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   290 000001BB                                 L39:
   291 000001BB 8B 75 EC                        	MOV	ESI,DWORD [-20+EBP]
   292 000001BE 8A 45 F3                        	MOV	AL,BYTE [-13+EBP]
   293 000001C1 42                              	INC	EDX
   294 000001C2 88 06                           	MOV	BYTE [ESI],AL
   295 000001C4 46                              	INC	ESI
   296 000001C5 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   297 000001C8 39 FA                           	CMP	EDX,EDI
   298 000001CA 7E EF                           	JLE	L39
   299 000001CC                                 L44:
   300 000001CC 41                              	INC	ECX
   301 000001CD 03 5D 0C                        	ADD	EBX,DWORD [12+EBP]
   302 000001D0 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   303 000001D3 7E D5                           	JLE	L40
   304 000001D5                                 L42:
   305 000001D5 58                              	POP	EAX
   306 000001D6 5A                              	POP	EDX
   307 000001D7 5B                              	POP	EBX
   308 000001D8 5E                              	POP	ESI
   309 000001D9 5F                              	POP	EDI
   310 000001DA 5D                              	POP	EBP
   311 000001DB C3                              	RET
   312 000001DC                                 	GLOBAL	_set_palette
   313 000001DC                                 _set_palette:
   314 000001DC 55                              	PUSH	EBP
   315 000001DD 89 E5                           	MOV	EBP,ESP
   316 000001DF 57                              	PUSH	EDI
   317 000001E0 56                              	PUSH	ESI
   318 000001E1 53                              	PUSH	EBX
   319 000001E2 51                              	PUSH	ECX
   320 000001E3 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   321 000001E6 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   322 000001E9 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   323 000001EC E8 [00000000]                   	CALL	_io_load_eflags
   324 000001F1 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   325 000001F4 E8 [00000000]                   	CALL	_io_cli
   326 000001F9 53                              	PUSH	EBX
   327 000001FA 68 000003C8                     	PUSH	968
   328 000001FF E8 [00000000]                   	CALL	_io_out8
   329 00000204 39 FB                           	CMP	EBX,EDI
   330 00000206 58                              	POP	EAX
   331 00000207 5A                              	POP	EDX
   332 00000208 7E 12                           	JLE	L50
   333 0000020A                                 L52:
   334 0000020A 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   335 0000020D 89 45 08                        	MOV	DWORD [8+EBP],EAX
   336 00000210 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   337 00000213 5B                              	POP	EBX
   338 00000214 5E                              	POP	ESI
   339 00000215 5F                              	POP	EDI
   340 00000216 5D                              	POP	EBP
   341 00000217 E9 [00000000]                   	JMP	_io_store_eflags
   342 0000021C                                 L50:
   343 0000021C 8A 06                           	MOV	AL,BYTE [ESI]
   344 0000021E 43                              	INC	EBX
   345 0000021F C0 E8 02                        	SHR	AL,2
   346 00000222 0F B6 C0                        	MOVZX	EAX,AL
   347 00000225 50                              	PUSH	EAX
   348 00000226 68 000003C9                     	PUSH	969
   349 0000022B E8 [00000000]                   	CALL	_io_out8
   350 00000230 8A 46 01                        	MOV	AL,BYTE [1+ESI]
   351 00000233 C0 E8 02                        	SHR	AL,2
   352 00000236 0F B6 C0                        	MOVZX	EAX,AL
   353 00000239 50                              	PUSH	EAX
   354 0000023A 68 000003C9                     	PUSH	969
   355 0000023F E8 [00000000]                   	CALL	_io_out8
   356 00000244 8A 46 02                        	MOV	AL,BYTE [2+ESI]
   357 00000247 C0 E8 02                        	SHR	AL,2
   358 0000024A 83 C6 03                        	ADD	ESI,3
   359 0000024D 0F B6 C0                        	MOVZX	EAX,AL
   360 00000250 50                              	PUSH	EAX
   361 00000251 68 000003C9                     	PUSH	969
   362 00000256 E8 [00000000]                   	CALL	_io_out8
   363 0000025B 83 C4 18                        	ADD	ESP,24
   364 0000025E 39 FB                           	CMP	EBX,EDI
   365 00000260 7E BA                           	JLE	L50
   366 00000262 EB A6                           	JMP	L52
